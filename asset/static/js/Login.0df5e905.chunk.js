(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{133:function(e,n,t){"use strict";var o=t(6),a=t(127),r=t.n(a),i=(t(91),t(92)),c=t.n(i),s=t(161),l=t.n(s);t.d(n,"a",function(){return u});var p=r.a.create({baseURL:window.location.origin}),u=(r.a.CancelToken,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.post(e,Object(o.a)({},n))});p.interceptors.request.use(function(e){return c.a.loading("loading...",0,function(){},!0),e},function(e){return Promise.reject(e)}),p.interceptors.response.use(function(e){var n=e.data;return c.a.hide(),n},function(e){if(e.response){var n=e.response,t=n.data,o="error: ".concat(JSON.stringify(t)),a=l()(n,"bodyJson.errorMessage");if(a&&(o="".concat(a)),[401].includes(n.status))return c.a.fail("\u65e0\u6743\u9650"),window.location.href="/spa/login",void setTimeout(function(){c.a.hide()},2e3);404===n.status&&(o="\u670d\u52a1\u6682\u4e0d\u53ef\u7528. eror: 404"),500===n.status&&(o="\u670d\u52a1\u6682\u4e0d\u53ef\u7528. eror: 500"),502===n.status&&(o="\u670d\u52a1\u6682\u4e0d\u53ef\u7528. eror: 502"),504===n.status&&(o="\u8bf7\u6c42\u8d85\u65f6. eror: 504"),c.a.fail("\u8bf7\u6c42\u9519\u8bef. error: ".concat(o))}else c.a.fail("\u8bf7\u6c42\u9519\u8bef");throw setTimeout(function(){c.a.hide()},2e3),e})},278:function(e,n,t){e.exports={container:"mall-login_container__3ow34",tip:"mall-login_tip__3RxM_",tip__message:"mall-login_tip__message__3pNuW",tipMessage:"mall-login_tip__message__3pNuW",tip__btn:"mall-login_tip__btn__E-Rob",tipBtn:"mall-login_tip__btn__E-Rob","login-content":"mall-login_login-content__2Mpfj",loginContent:"mall-login_login-content__2Mpfj","other-login":"mall-login_other-login__395IF",otherLogin:"mall-login_other-login__395IF","login-header":"mall-login_login-header__T_LIj",loginHeader:"mall-login_login-header__T_LIj",header__tip:"mall-login_header__tip__2LVfS",headerTip:"mall-login_header__tip__2LVfS",header__line:"mall-login_header__line__Fca5e",headerLine:"mall-login_header__line__Fca5e",login__application:"mall-login_login__application__okT48",loginApplication:"mall-login_login__application__okT48",application:"mall-login_application__OWJlU",application__tip:"mall-login_application__tip__35Pk_",applicationTip:"mall-login_application__tip__35Pk_",qqLoginBtn:"mall-login_qqLoginBtn__3Ygkw"}},321:function(e,n,t){var o,a;!function(r){if(void 0===(a="function"===typeof(o=r)?o.call(n,t,n,e):o)||(e.exports=a),!0,e.exports=r(),!!0){var i=window.Cookies,c=window.Cookies=r();c.noConflict=function(){return window.Cookies=i,c}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(o){function a(){}function r(n,t,r){if("undefined"!==typeof document){"number"===typeof(r=e({path:"/"},a.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(l){}t=o.write?o.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in r)r[s]&&(c+="; "+s,!0!==r[s]&&(c+="="+r[s].split(";")[0]));return document.cookie=n+"="+t+c}}function i(e,t){if("undefined"!==typeof document){for(var a={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var c=r[i].split("="),s=c.slice(1).join("=");t||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var l=n(c[0]);if(s=(o.read||o)(s,l)||n(s),t)try{s=JSON.parse(s)}catch(p){}if(a[l]=s,e===l)break}catch(p){}}return e?a[e]:a}}return a.set=r,a.get=function(e){return i(e,!1)},a.getJSON=function(e){return i(e,!0)},a.remove=function(n,t){r(n,"",e(t,{expires:-1}))},a.defaults={},a.withConverter=t,a}(function(){})})},65:function(e,n,t){"use strict";t.r(n);t(111);var o=t(112),a=t.n(o),r=(t(153),t(155)),i=t.n(r),c=(t(157),t(158)),s=t.n(c),l=(t(91),t(92)),p=t.n(l),u=t(73),_=t(75),d=t(77),g=t(76),f=t(78),m=t(0),h=t.n(m),w=t(328),v=t(278),E=t.n(v),C=t(133),k=t(321),y=t.n(k).a,b=function(e){function n(){var e,t;Object(u.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(d.a)(this,(e=Object(g.a)(n)).call.apply(e,[this].concat(a)))).state={account:"",accountError:!1,password:"",passwordError:!1,inputType:"password"},t.onLogin=function(){var e=t.state,n=e.account,o=e.password,a=t.props.history,r=t.accountVaild(n),i=t.passwordVaild(o);if(!r||!i)return r||t.setState({accountError:!0}),void(i||t.setState({passwordError:!0}));Object(C.a)("/api/login",{phone:n,password:o}).then(function(e){if(e){var t=e.status,o=e.message;2==t&&(y.set("phone",n,{expires:7,path:""}),y.set("sessionToken",e.token,{expires:7,path:""}),a.push("/shopping")),p.a.info(o)}})},t.accountVaild=function(e){return/^1[3456789]\d{9}$/.test(e)},t.onAccountChange=function(e){var n=t.accountVaild(e);t.setState({accountError:!n}),t.setState({account:e})},t.onAccountErrorClick=function(){p.a.info("\u8bf7\u8f93\u5165\u89c4\u8303\u624b\u673a\u53f7")},t.passwordVaild=function(e){return/\d{6,12}$/.test(e)},t.onPassWordChange=function(e){var n=t.passwordVaild(e);t.setState({passwordError:!n}),t.setState({password:e})},t.onPassWordErrorClick=function(){p.a.info("\u8bf7\u8f93\u51656\u523012\u4f4d\u5bc6\u7801")},t.onRegister=function(){t.props.history.push("/register")},t.renderEye=function(){return h.a.createElement("div",{className:"icon-99",onClick:function(){var e=t.state.inputType;t.setState({inputType:"password"==e?"text":"password"})}})},t}return Object(f.a)(n,e),Object(_.a)(n,[{key:"render",value:function(){var e=this.state,n=e.accountError,t=e.passwordError,o=e.inputType;return h.a.createElement("div",{className:E.a.container},h.a.createElement("form",null,h.a.createElement("div",{className:E.a.tip},h.a.createElement("span",{className:E.a.tip__message},"\u6ca1\u6709\u8d26\u53f7\uff1f"),h.a.createElement("span",{className:E.a.tip__btn,onClick:this.onRegister},"\u7533\u8bf7")),h.a.createElement("div",{className:E.a.loginContent},h.a.createElement(s.a,{error:n,onChange:this.onAccountChange,clear:!0,placeholder:"\u624b\u673a\u53f7/\u90ae\u7bb1",onErrorClick:this.onAccountErrorClick},h.a.createElement("span",{className:"fz20"},"\u8d26\u53f7")),h.a.createElement(s.a,{error:t,onChange:this.onPassWordChange,placeholder:"\u8bf7\u8f93\u51656-20\u4f4d\u5bc6\u7801",type:o,maxLength:20,clear:!0,extra:this.renderEye(),onErrorClick:this.onPassWordErrorClick},h.a.createElement("span",{className:"fz20"},"\u5bc6\u7801")),h.a.createElement(a.a,{size:"lg"},h.a.createElement(i.a,{onClick:this.onLogin,type:"primary",size:"large",className:"mt30"},"\u767b\u5f55")))))}}]),n}(h.a.Component);n.default=Object(w.a)(b)}}]);
//# sourceMappingURL=Login.0df5e905.chunk.js.map