{"version":3,"sources":["core/network/index.tsx","core/network/interceptors/reques.tsx","core/network/interceptors/response.tsx","webpack:///./src/asset/sass/views/mall-login.module.scss?2b25","asset/sass/views/mall-login.module.scss","../node_modules/js-cookie/src/js.cookie.js","core/util/cookie.tsx","views/mall-login/index.tsx"],"names":["instance","axios","create","baseURL","window","location","origin","apiPost","CancelToken","url","params","arguments","length","undefined","post","Object","objectSpread","interceptors","request","use","config","toast_default","a","loading","error","Promise","reject","response","_ref","data","hide","res","bodyJson","message","concat","JSON","stringify","errorMessage","get_default","includes","status","fail","href","setTimeout","content","__webpack_require__","module","i","options","hmr","transform","insertInto","locals","exports","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","container","tip","tip__message","tipMessage","tip__btn","tipBtn","login-content","loginContent","other-login","otherLogin","login-header","loginHeader","header__tip","headerTip","header__line","headerLine","login__application","loginApplication","application","application__tip","applicationTip","qqLoginBtn","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","factory","call","OldCookies","Cookies","api","noConflict","extend","result","attributes","key","decode","s","replace","decodeURIComponent","init","converter","set","value","document","path","defaults","expires","Date","toUTCString","test","e","write","encodeURIComponent","String","escape","stringifiedAttributes","attributeName","split","cookie","get","json","jar","cookies","parts","slice","join","charAt","name","read","parse","getJSON","remove","withConverter","Login","state","account","accountError","password","passwordError","inputType","onLogin","_this$state","_this","history","props","isVaildAccount","accountVaild","isVaildPassword","passwordVaild","setState","phone","then","token","info","onAccountChange","isVaild","onAccountErrorClick","onPassWordChange","onPassWordErrorClick","onRegister","renderEye","react_default","createElement","className","onClick","_this$state2","this","Style","input_item_default","onChange","clear","placeholder","onErrorClick","type","maxLength","extra","wing_blank_default","size","button_default","React","Component","withRouter"],"mappings":"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","file":"static/js/Login.413d1d42.chunk.js","sourcesContent":["import axios from \"axios\";\nimport { request, requestError } from \"@/core/network/interceptors/reques.tsx\";\nimport {\n  response,\n  responseError\n} from \"@/core/network/interceptors/response.tsx\";\n\nconst instance = axios.create({\n  baseURL: window.location.origin\n});\n\nconst CancelToken = axios.CancelToken;\n//暂时没想好要不要用cancelTotal\nexport const cancelTotal: object[] = [];\n\ninterface ICancelData {\n  url: string;\n  cancel?: any;\n}\n\nexport const apiGet = (url: string, params = {}) => {\n  let cancelData: ICancelData = {\n    url: \"\"\n  };\n  cancelData.url = url;\n  return instance.get(url, {\n    params,\n    cancelToken: new CancelToken(c => {\n      cancelData.cancel = c;\n      cancelTotal.push(cancelData);\n    })\n  });\n};\nexport const apiPost = (url: string, params = {}) => {\n  let cancelData: ICancelData = {\n    url: \"\"\n  };\n  cancelData.url = url;\n  return instance.post(url, {\n    ...params\n  });\n};\nexport const apiPut = (url: string, params = {}) => {\n  let cancelData: ICancelData = {\n    url: \"\"\n  };\n  cancelData.url = url;\n  return instance.put(url, {\n    ...params\n  });\n};\nexport const apiDelete = (url: string, params = {}) => {\n  let cancelData: ICancelData = {\n    url: \"\"\n  };\n  cancelData.url = url;\n  return instance.delete(url, {\n    ...params\n  });\n};\n\ninstance.interceptors.request.use(request, requestError);\ninstance.interceptors.response.use(response, responseError);\n\nexport default instance;\n","import { AxiosRequestConfig, AxiosError } from \"axios\";\nimport { Toast } from \"antd-mobile\";\nexport const request = (config: AxiosRequestConfig) => {\n  Toast.loading(\"loading...\", 0, () => {}, true);\n  return config;\n};\n\nexport const requestError = (error: AxiosError) => {\n  return Promise.reject(error);\n};\n","import { AxiosResponse, AxiosError } from \"axios\";\n// base ui comp\nimport { Toast } from \"antd-mobile\";\nimport { get } from \"lodash\";\nexport const response = ({ data }: AxiosResponse) => {\n  Toast.hide();\n  return data;\n};\n\nexport const responseError = (error: AxiosError) => {\n  if (error.response) {\n    let res = error.response;\n    const bodyJson = res.data;\n    // err 不是字符串\n    let message = `error: ${JSON.stringify(bodyJson)}`;\n\n    const errorMessage = get(res, \"bodyJson.errorMessage\");\n    if (errorMessage) {\n      message = `${errorMessage}`;\n    }\n\n    // 401\n    if ([401].includes(res.status)) {\n      // 跳转登录页面;\n      Toast.fail(\"无权限\");\n      window.location.href = \"/spa/login\";\n      setTimeout(() => {\n        Toast.hide();\n      }, 2000);\n      return;\n    }\n    // 404\n    if (res.status === 404) {\n      message = \"服务暂不可用. eror: 404\";\n    }\n    if (res.status === 500) {\n      message = \"服务暂不可用. eror: 500\";\n    }\n    if (res.status === 502) {\n      message = \"服务暂不可用. eror: 502\";\n    }\n    if (res.status === 504) {\n      message = \"请求超时. eror: 504\";\n    }\n\n    Toast.fail(`请求错误. error: ${message}`);\n  } else {\n    Toast.fail(\"请求错误\");\n  }\n\n  setTimeout(() => {\n    Toast.hide();\n  }, 2000);\n\n  throw error;\n};\n","\nvar content = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--6-oneOf-6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-6-3!./mall-login.module.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--6-oneOf-6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-6-3!./mall-login.module.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/typings-for-css-modules-loader/lib/index.js??ref--6-oneOf-6-1!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-6-3!./mall-login.module.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".text-ell {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis; }\\n\\n.clearmid {\\n  height: 100%;\\n  width: 0;\\n  display: inline-block;\\n  vertical-align: middle; }\\n\\n.clearfix::after {\\n  display: block;\\n  height: 0;\\n  overflow: hidden;\\n  clear: both;\\n  content: ''; }\\n\\n.abs-c {\\n  position: absolute !important;\\n  z-index: 20;\\n  left: 50%;\\n  top: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%); }\\n\\n.mall-login_container__1BmdZ {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background: white; }\\n\\n.mall-login_tip__iZYWA {\\n  display: flex;\\n  padding: 10px;\\n  background: #fdf6ec;\\n  align-items: center; }\\n\\n.mall-login_tip__message__25ttT {\\n  font-size: 12px;\\n  color: #666666;\\n  margin-right: 10px; }\\n\\n.mall-login_tip__btn__1EEuo {\\n  padding: 2px 4px;\\n  border-radius: 4px;\\n  border: 1px solid #108ee9;\\n  color: #108ee9;\\n  font-size: 12px; }\\n\\n.mall-login_login-content__1wCWZ {\\n  position: absolute;\\n  width: 100%;\\n  margin-top: 15vh; }\\n\\n.mall-login_other-login__3Z85D {\\n  position: absolute;\\n  bottom: 0px;\\n  width: 100%;\\n  height: 30vh; }\\n\\n.mall-login_login-header__2rVxL {\\n  display: flex;\\n  align-items: center; }\\n\\n.mall-login_header__tip__1I4-C {\\n  width: 200px;\\n  text-align: center;\\n  color: #999;\\n  font-size: 16px; }\\n\\n.mall-login_header__line__u7WZo {\\n  flex: 1 1;\\n  height: 1px;\\n  background: #ddd; }\\n\\n.mall-login_login__application__32oS6 {\\n  display: flex;\\n  justify-content: space-around;\\n  font-size: 35px;\\n  line-height: 0.7em; }\\n\\n.mall-login_application__3WzHe {\\n  text-align: center;\\n  margin-top: 20px; }\\n\\n.mall-login_application__tip__1yOzj {\\n  font-size: 16px; }\\n\\n.mall-login_qqLoginBtn__12dCq {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/huhu/hu/wx/wxgzh/wxgzh/react/src/asset/sass/tool/index.scss\",\"/Users/huhu/hu/wx/wxgzh/wxgzh/react/src/asset/sass/views/mall-login.module.scss\"],\"names\":[],\"mappings\":\"AACA;EAEI,oBAAmB;EACnB,iBAAgB;EAChB,wBAAuB,EAAA;;AAJ3B;EAQI,aAAY;EACZ,SAAQ;EACR,sBAAqB;EACrB,uBAAsB,EAAA;;AAX1B;EAgBM,eAAc;EACd,UAAS;EACT,iBAAgB;EAChB,YAAW;EACX,YAAW,EAAA;;AApBjB;EAyBI,8BAA6B;EAC7B,YAAW;EACX,UAAS;EACT,SAAQ;EACR,yCAAgC;UAAhC,iCAAgC,EAAA;;AC7BpC;EACE,mBAAkB;EAClB,aAAY;EACZ,YAAW;EACX,kBAAiB,EAAA;;AAEnB;EACE,cAAa;EACb,cAAa;EACb,oBAAmB;EACnB,oBAAmB,EAAA;;AAGrB;EACE,gBAAe;EACf,eAAc;EACd,mBAAkB,EAAA;;AAGpB;EACE,iBAAgB;EAChB,mBAAkB;EAClB,0BAAyB;EACzB,eAAc;EACd,gBAAe,EAAA;;AAGjB;EACE,mBAAkB;EAClB,YAAW;EACX,iBAAgB,EAAA;;AAGlB;EACE,mBAAkB;EAClB,YAAW;EACX,YAAW;EACX,aAAY,EAAA;;AAGd;EACE,cAAa;EACb,oBAAmB,EAAA;;AAGrB;EACE,aAAY;EACZ,mBAAkB;EAClB,YAAW;EACX,gBAAe,EAAA;;AAGjB;EACE,UAAO;EACP,YAAW;EACX,iBAAgB,EAAA;;AAGlB;EACE,cAAa;EACb,8BAA6B;EAC7B,gBAAe;EACf,mBAAkB,EAAA;;AAGpB;EACE,mBAAkB;EAClB,iBAAgB,EAAA;;AAGlB;EACE,gBAAe,EAAA;;AAGjB;EACE,cAAa,EAAA\",\"file\":\"mall-login.module.scss\",\"sourcesContent\":[\"// 工具样式\\n:global{\\n  .text-ell {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\\n  .clearmid {\\n    height: 100%;\\n    width: 0;\\n    display: inline-block;\\n    vertical-align: middle;\\n  }\\n\\n  .clearfix {\\n    &::after{\\n      display: block;\\n      height: 0;\\n      overflow: hidden;\\n      clear: both;\\n      content: '';\\n    }\\n  }\\n\\n  .abs-c{\\n    position: absolute !important;\\n    z-index: 20;\\n    left: 50%;\\n    top: 50%;\\n    transform: translate(-50%, -50%);\\n  }\\n}\",\"@import '@/asset/sass/_var.scss';@import '@/asset/sass/tool/index.scss';\\n.container{\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  background: white;\\n}\\n.tip {\\n  display: flex;\\n  padding: 10px;\\n  background: #fdf6ec;\\n  align-items: center;\\n}   \\n\\n.tip__message{\\n  font-size: 12px;\\n  color: #666666;\\n  margin-right: 10px;\\n}\\n\\n.tip__btn{\\n  padding: 2px 4px;\\n  border-radius: 4px;\\n  border: 1px solid #108ee9;\\n  color: #108ee9;\\n  font-size: 12px;\\n}\\n\\n.login-content{\\n  position: absolute;\\n  width: 100%;\\n  margin-top: 15vh;\\n}\\n\\n.other-login {\\n  position: absolute;\\n  bottom: 0px;\\n  width: 100%;\\n  height: 30vh;\\n}\\n\\n.login-header {  \\n  display: flex;\\n  align-items: center;\\n}\\n\\n.header__tip {\\n  width: 200px;\\n  text-align: center;\\n  color: #999;\\n  font-size: 16px;\\n}\\n\\n.header__line {\\n  flex: 1;\\n  height: 1px;\\n  background: #ddd;\\n}\\n\\n.login__application {\\n  display: flex;\\n  justify-content: space-around;\\n  font-size: 35px;\\n  line-height: 0.7em;\\n}\\n\\n.application {\\n  text-align: center;\\n  margin-top: 20px;\\n}\\n\\n.application__tip {\\n  font-size: 16px;\\n}\\n\\n.qqLoginBtn{\\n  display: none;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"container\": \"mall-login_container__1BmdZ\",\n\t\"tip\": \"mall-login_tip__iZYWA\",\n\t\"tip__message\": \"mall-login_tip__message__25ttT\",\n\t\"tipMessage\": \"mall-login_tip__message__25ttT\",\n\t\"tip__btn\": \"mall-login_tip__btn__1EEuo\",\n\t\"tipBtn\": \"mall-login_tip__btn__1EEuo\",\n\t\"login-content\": \"mall-login_login-content__1wCWZ\",\n\t\"loginContent\": \"mall-login_login-content__1wCWZ\",\n\t\"other-login\": \"mall-login_other-login__3Z85D\",\n\t\"otherLogin\": \"mall-login_other-login__3Z85D\",\n\t\"login-header\": \"mall-login_login-header__2rVxL\",\n\t\"loginHeader\": \"mall-login_login-header__2rVxL\",\n\t\"header__tip\": \"mall-login_header__tip__1I4-C\",\n\t\"headerTip\": \"mall-login_header__tip__1I4-C\",\n\t\"header__line\": \"mall-login_header__line__u7WZo\",\n\t\"headerLine\": \"mall-login_header__line__u7WZo\",\n\t\"login__application\": \"mall-login_login__application__32oS6\",\n\t\"loginApplication\": \"mall-login_login__application__32oS6\",\n\t\"application\": \"mall-login_application__3WzHe\",\n\t\"application__tip\": \"mall-login_application__tip__1yOzj\",\n\t\"applicationTip\": \"mall-login_application__tip__1yOzj\",\n\t\"qqLoginBtn\": \"mall-login_qqLoginBtn__12dCq\"\n};","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;\n\n(function (factory) {\n  var registeredInModuleLoader;\n\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n    registeredInModuleLoader = true;\n  }\n\n  if (typeof exports === 'object') {\n    module.exports = factory();\n    registeredInModuleLoader = true;\n  }\n\n  if (!registeredInModuleLoader) {\n    var OldCookies = window.Cookies;\n    var api = window.Cookies = factory();\n\n    api.noConflict = function () {\n      window.Cookies = OldCookies;\n      return api;\n    };\n  }\n})(function () {\n  function extend() {\n    var i = 0;\n    var result = {};\n\n    for (; i < arguments.length; i++) {\n      var attributes = arguments[i];\n\n      for (var key in attributes) {\n        result[key] = attributes[key];\n      }\n    }\n\n    return result;\n  }\n\n  function decode(s) {\n    return s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n  }\n\n  function init(converter) {\n    function api() {}\n\n    function set(key, value, attributes) {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      attributes = extend({\n        path: '/'\n      }, api.defaults, attributes);\n\n      if (typeof attributes.expires === 'number') {\n        attributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n      } // We're using \"expires\" because \"max-age\" is not supported by IE\n\n\n      attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n      try {\n        var result = JSON.stringify(value);\n\n        if (/^[\\{\\[]/.test(result)) {\n          value = result;\n        }\n      } catch (e) {}\n\n      value = converter.write ? converter.write(value, key) : encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n      key = encodeURIComponent(String(key)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\\(\\)]/g, escape);\n      var stringifiedAttributes = '';\n\n      for (var attributeName in attributes) {\n        if (!attributes[attributeName]) {\n          continue;\n        }\n\n        stringifiedAttributes += '; ' + attributeName;\n\n        if (attributes[attributeName] === true) {\n          continue;\n        } // Considers RFC 6265 section 5.2:\n        // ...\n        // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n        //     character:\n        // Consume the characters of the unparsed-attributes up to,\n        // not including, the first %x3B (\";\") character.\n        // ...\n\n\n        stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n      }\n\n      return document.cookie = key + '=' + value + stringifiedAttributes;\n    }\n\n    function get(key, json) {\n      if (typeof document === 'undefined') {\n        return;\n      }\n\n      var jar = {}; // To prevent the for loop in the first place assign an empty array\n      // in case there are no cookies at all.\n\n      var cookies = document.cookie ? document.cookie.split('; ') : [];\n      var i = 0;\n\n      for (; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        var cookie = parts.slice(1).join('=');\n\n        if (!json && cookie.charAt(0) === '\"') {\n          cookie = cookie.slice(1, -1);\n        }\n\n        try {\n          var name = decode(parts[0]);\n          cookie = (converter.read || converter)(cookie, name) || decode(cookie);\n\n          if (json) {\n            try {\n              cookie = JSON.parse(cookie);\n            } catch (e) {}\n          }\n\n          jar[name] = cookie;\n\n          if (key === name) {\n            break;\n          }\n        } catch (e) {}\n      }\n\n      return key ? jar[key] : jar;\n    }\n\n    api.set = set;\n\n    api.get = function (key) {\n      return get(key, false\n      /* read as raw */\n      );\n    };\n\n    api.getJSON = function (key) {\n      return get(key, true\n      /* read as json */\n      );\n    };\n\n    api.remove = function (key, attributes) {\n      set(key, '', extend(attributes, {\n        expires: -1\n      }));\n    };\n\n    api.defaults = {};\n    api.withConverter = init;\n    return api;\n  }\n\n  return init(function () {});\n});","import cookie from \"js-cookie\";\n\nexport default cookie;\n","import React from \"react\";\n// base ui comp\nimport { InputItem, Button, WingBlank, Toast } from \"antd-mobile\";\n//\nimport { withRouter, RouteComponentProps } from 'react-router'\n// scss\nimport Style from \"@/asset/sass/views/mall-login.module.scss\";\n// network\nimport { apiPost } from \"@/core/network\"; \n// util\nimport cookie from \"@/core/util/cookie\";       \n     \ntype ContainerProps = RouteComponentProps<any> & {}\n\ninterface ContainerState { \n  account: string,\n  accountError: boolean,\n  password: string, \n  passwordError: boolean,\n  inputType: any\n}  \n\n\nclass Login extends React.Component<ContainerProps, ContainerState> {\n  state = {\n    account: \"\",\n    accountError: false,\n    password: \"\",\n    passwordError: false,\n    inputType: 'password'\n  }\n  onLogin = () => {\n    let { account, password } = this.state;\n    let { history } = this.props;\n    let isVaildAccount =  this.accountVaild(account);\n    let isVaildPassword =  this.passwordVaild(password);\n    if(!isVaildAccount || !isVaildPassword){\n      if(!isVaildAccount) this.setState({\n        accountError: true\n      });\n      if(!isVaildPassword) this.setState({\n        passwordError: true\n      });\n      return;\n    }\n    apiPost(\"/api/login\", \n      {\n        phone: account,\n        password   \n      }\n    ).then((res: any) => {\n      if(res){\n        let { status, message } = res\n        if(status == 2){\n          cookie.set('phone', account, { expires: 7, path: '' });\n          cookie.set('sessionToken', res.token, { expires: 7, path: '' });\n          history.push('/shopping')\n        }\n        Toast.info(message);\n      }\n    });\n  }\n  accountVaild = (value: string): boolean => {\n    let regExp: RegExp = /^1[3456789]\\d{9}$/;    \n    return regExp.test(value);\n  }\n  onAccountChange = (value: string): void => {\n    let isVaild = this.accountVaild(value);\n    this.setState({\n      accountError: !isVaild,\n    });\n  \n    this.setState({\n      account: value\n    });\n  }\n  onAccountErrorClick = () => {\n    Toast.info('请输入规范手机号');\n  }\n  passwordVaild = (value: string): boolean => {\n    let regExp: RegExp = /\\d{6,12}$/;\n    return regExp.test(value);\n  }\n  onPassWordChange = (value: string): void => {\n    let isVaild = this.passwordVaild(value);\n    this.setState({\n      passwordError: !isVaild,\n    });\n    this.setState({\n      password: value\n    });\n  }\n  onPassWordErrorClick = () => {\n    Toast.info('请输入6到12位密码');\n  }\n  onRegister = () => {\n    this.props.history.push('/register')\n  } \n  renderEye = () => {\n    return (\n      <div className=\"icon-99\" onClick={() => {\n        let { inputType } = this.state;\n        this.setState({\n          inputType: inputType == 'password' ? 'text' : 'password'\n        })\n      }}></div>\n    )\n  }\n  render() {\n    let { accountError, passwordError, inputType } = this.state;\n    return ( \n      <div className={Style.container}>     \n        <form>\n          <div className={Style.tip}>\n            <span className={Style.tip__message}>没有账号？</span>\n            <span className={Style.tip__btn} onClick={this.onRegister}>申请</span>\n          </div>\n          <div className={Style['loginContent']}>\n            <InputItem\n              error={accountError}\n              onChange={this.onAccountChange}\n              clear\n              placeholder=\"手机号/邮箱\"\n              onErrorClick={this.onAccountErrorClick}\n            >\n              <span className=\"fz20\">账号</span>\n            </InputItem>\n            <InputItem\n              error={passwordError}\n              onChange={this.onPassWordChange}\n              placeholder=\"请输入6-20位密码\"\n              type={inputType as any}\n              maxLength={20}\n              clear\n              extra={this.renderEye()}\n              onErrorClick={this.onPassWordErrorClick}\n            >\n              <span className=\"fz20\">密码</span>\n            </InputItem>\n            <WingBlank size=\"lg\">\n              <Button\n                onClick={this.onLogin}\n                type=\"primary\"\n                size=\"large\"\n                className=\"mt30\"\n              >        \n              登录\n              </Button>\n            </WingBlank>\n          </div>\n        </form>    \n      </div>\n    );\n  }\n}\n\nexport default withRouter(Login);\n"],"sourceRoot":""}